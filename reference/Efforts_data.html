<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Process GBIF sampling effort data for the IASDT — efforts_data • IASDT.R</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Process GBIF sampling effort data for the IASDT — efforts_data"><meta name="description" content="Downloads and processes GBIF sampling effort data for vascular plants in
Europe, supporting the Invasive Alien Species Digital Twin (IASDT).
Orchestrated by efforts_process(), it uses helper functions to request,
download, split, summarise, and visualise data at the Order level. The
functions prepares raster maps for the number of vascular plant observations
and species per grid cell."><meta property="og:description" content="Downloads and processes GBIF sampling effort data for vascular plants in
Europe, supporting the Invasive Alien Species Digital Twin (IASDT).
Orchestrated by efforts_process(), it uses helper functions to request,
download, split, summarise, and visualise data at the Order level. The
functions prepares raster maps for the number of vascular plant observations
and species per grid cell."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">IASDT.R</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.05</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html"><span class="fa fa-file-code-o"></span> Functions</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-modelling-workflow" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fas fa-book"></span> Modelling workflow</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-modelling-workflow"><li><a class="dropdown-item" href="../articles/workflow_1_overview.html">Overview</a></li>
    <li><a class="dropdown-item" href="../articles/workflow_2_abiotic_data.html">Processing abiotic data</a></li>
    <li><a class="dropdown-item" href="../articles/workflow_3_biotic_data.html">Processing biotic data</a></li>
    <li><a class="dropdown-item" href="../articles/workflow_4_model_fitting.html">Model fitting</a></li>
    <li><a class="dropdown-item" href="../articles/workflow_5_model_postprocess.html">Model post-processing</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/BioDT/IASDT.R/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Process GBIF sampling effort data for the <code>IASDT</code></h1>
      <small class="dont-index">Source: <a href="https://github.com/BioDT/IASDT.R/blob/main/R/DWF_efforts_process.R" class="external-link"><code>R/DWF_efforts_process.R</code></a>, <a href="https://github.com/BioDT/IASDT.R/blob/main/R/DWF_efforts_request.R" class="external-link"><code>R/DWF_efforts_request.R</code></a>, <a href="https://github.com/BioDT/IASDT.R/blob/main/R/DWF_efforts_download.R" class="external-link"><code>R/DWF_efforts_download.R</code></a>, and 3 more</small>
      <div class="d-none name"><code>Efforts_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Downloads and processes GBIF sampling effort data for vascular plants in
Europe, supporting the Invasive Alien Species Digital Twin (<code>IASDT</code>).
Orchestrated by <code>efforts_process()</code>, it uses helper functions to request,
download, split, summarise, and visualise data at the Order level. The
functions prepares raster maps for the number of vascular plant observations
and species per grid cell.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">efforts_process</span><span class="op">(</span></span>
<span>  env_file <span class="op">=</span> <span class="st">".env"</span>,</span>
<span>  r_environ <span class="op">=</span> <span class="st">".Renviron"</span>,</span>
<span>  request <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  download <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  n_cores <span class="op">=</span> <span class="fl">6L</span>,</span>
<span>  strategy <span class="op">=</span> <span class="st">"future::multicore"</span>,</span>
<span>  start_year <span class="op">=</span> <span class="fl">1981L</span>,</span>
<span>  boundaries <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">30</span>, <span class="fl">50</span>, <span class="fl">25</span>, <span class="fl">75</span><span class="op">)</span>,</span>
<span>  chunk_size <span class="op">=</span> <span class="fl">100000L</span>,</span>
<span>  delete_chunks <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  delete_processed <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">efforts_request</span><span class="op">(</span></span>
<span>  env_file <span class="op">=</span> <span class="st">".env"</span>,</span>
<span>  n_cores <span class="op">=</span> <span class="fl">3L</span>,</span>
<span>  strategy <span class="op">=</span> <span class="st">"future::multicore"</span>,</span>
<span>  start_year <span class="op">=</span> <span class="fl">1981L</span>,</span>
<span>  r_environ <span class="op">=</span> <span class="st">".Renviron"</span>,</span>
<span>  boundaries <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">30</span>, <span class="fl">50</span>, <span class="fl">25</span>, <span class="fl">75</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">efforts_download</span><span class="op">(</span></span>
<span>  n_cores <span class="op">=</span> <span class="fl">6L</span>,</span>
<span>  strategy <span class="op">=</span> <span class="st">"future::multicore"</span>,</span>
<span>  env_file <span class="op">=</span> <span class="st">".env"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">efforts_summarize</span><span class="op">(</span></span>
<span>  env_file <span class="op">=</span> <span class="st">".env"</span>,</span>
<span>  n_cores <span class="op">=</span> <span class="fl">6L</span>,</span>
<span>  strategy <span class="op">=</span> <span class="st">"future::multicore"</span>,</span>
<span>  chunk_size <span class="op">=</span> <span class="fl">100000L</span>,</span>
<span>  delete_chunks <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">efforts_split</span><span class="op">(</span>path_zip <span class="op">=</span> <span class="cn">NULL</span>, env_file <span class="op">=</span> <span class="st">".env"</span>, chunk_size <span class="op">=</span> <span class="fl">100000L</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">efforts_plot</span><span class="op">(</span>env_file <span class="op">=</span> <span class="st">".env"</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-env-file">env_file<a class="anchor" aria-label="anchor" href="#arg-env-file"></a></dt>
<dd><p>Character. Path to the environment file containing paths to
data sources. Defaults to <code>.env</code>.</p></dd>


<dt id="arg-r-environ">r_environ<a class="anchor" aria-label="anchor" href="#arg-r-environ"></a></dt>
<dd><p>Character. Path to <code>.Renviron</code> file with GBIF credentials
(<code>GBIF_EMAIL</code>, <code>GBIF_USER</code>, <code>GBIF_PWD</code>). Default: <code>".Renviron"</code>. The
credentials must be in the format:</p><ul><li><p><code>GBIF_EMAIL=your_email</code></p></li>
<li><p><code>GBIF_USER=your_username</code></p></li>
<li><p><code>GBIF_PWD=your_password</code></p></li>
</ul></dd>


<dt id="arg-request">request<a class="anchor" aria-label="anchor" href="#arg-request"></a></dt>
<dd><p>Logical. If <code>TRUE</code> (default), requests GBIF data; otherwise,
loads existing data.</p></dd>


<dt id="arg-download">download<a class="anchor" aria-label="anchor" href="#arg-download"></a></dt>
<dd><p>Logical. If <code>TRUE</code> (default), downloads and saves GBIF data;
otherwise, skips download. Default: <code>TRUE</code>.</p></dd>


<dt id="arg-n-cores">n_cores<a class="anchor" aria-label="anchor" href="#arg-n-cores"></a></dt>
<dd><p>Integer. Number of CPU cores to use for parallel processing.
Default: 6, except for <code>efforts_request</code>, which defaults to 3 with a
maximum of 3.</p></dd>


<dt id="arg-strategy">strategy<a class="anchor" aria-label="anchor" href="#arg-strategy"></a></dt>
<dd><p>Character. The parallel processing strategy to use. Valid
options are "future::sequential", "future::multisession",
"future::multicore", and "future::cluster". Defaults to
<code>"future::multicore"</code> (<code>"future::multisession"</code> on Windows). See
<code><a href="https://future.futureverse.org/reference/plan.html" class="external-link">future::plan()</a></code> and <code><a href="https://elgabbas.github.io/ecokit/reference/set_parallel.html" class="external-link">ecokit::set_parallel()</a></code> for details.</p></dd>


<dt id="arg-start-year">start_year<a class="anchor" aria-label="anchor" href="#arg-start-year"></a></dt>
<dd><p>Integer. Earliest year for GBIF records (matches CHELSA
climate data). Default: <code>1981</code>.</p></dd>


<dt id="arg-boundaries">boundaries<a class="anchor" aria-label="anchor" href="#arg-boundaries"></a></dt>
<dd><p>Numeric vector (length 4). GBIF data bounds (Left, Right,
Bottom, Top). Default: <code>c(-30, 50, 25, 75)</code>.</p></dd>


<dt id="arg-chunk-size">chunk_size<a class="anchor" aria-label="anchor" href="#arg-chunk-size"></a></dt>
<dd><p>Integer. Rows per chunk file. Default: <code>100000</code>.</p></dd>


<dt id="arg-delete-chunks">delete_chunks<a class="anchor" aria-label="anchor" href="#arg-delete-chunks"></a></dt>
<dd><p>Logical. If <code>TRUE</code> (default), deletes chunk files
post-processing.</p></dd>


<dt id="arg-delete-processed">delete_processed<a class="anchor" aria-label="anchor" href="#arg-delete-processed"></a></dt>
<dd><p>Logical. If <code>TRUE</code> (default), removes raw GBIF files
after processing (&gt;22 GB).</p></dd>


<dt id="arg-path-zip">path_zip<a class="anchor" aria-label="anchor" href="#arg-path-zip"></a></dt>
<dd><p>Character. Path to zip file with CSV for splitting.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>

<ul><li><p><code>efforts_process()</code> is the main entry point for processing sampling effort
data.</p></li>
<li><p>Time-intensive (&gt;9 hours on 6-core Windows PC; GBIF request ~5 hours).</p></li>
<li><p>Detects and processes only new/missing data by order.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="functions-details">Functions details<a class="anchor" aria-label="anchor" href="#functions-details"></a></h2>


<ul><li><p><strong><code>efforts_process()</code></strong>: Manages the workflow for requesting, downloading,
processing, and plotting GBIF vascular plant data.</p></li>
<li><p><strong><code>efforts_request()</code></strong>: Requests GBIF data by order in parallel. Stores
results to disk.</p></li>
<li><p><strong><code>efforts_download()</code></strong>: Downloads GBIF data, validates files, and loads
existing data if available. Returns a dataframe (<code>Efforts_AllRequests</code>)
with paths.</p></li>
<li><p><strong><code>efforts_split()</code></strong>: Splits zipped CSV data by order into chunks, saving
each separately.</p></li>
<li><p><strong><code>efforts_summarize()</code></strong>: Processes and summarises data into <code>RData</code> and
TIFF rasters.</p></li>
<li><p><strong><code>efforts_plot()</code></strong>: Plots observation efforts (raw and log10 scales).</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Data source: <a href="https://www.gbif.org" class="external-link">https://www.gbif.org</a></p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Ahmed El-Gabbas</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://elgabbas.netlify.app/" class="external-link">Ahmed El-Gabbas</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>

