<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Prepare initial models in R for model fitting with Hmsc-HPC — Mod_Prep4HPC • IASDT.R</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Prepare initial models in R for model fitting with Hmsc-HPC — Mod_Prep4HPC"><meta name="description" content="This function prepares initial models in R use with Hmsc-HPC. It includes
data preparation, define spatial block cross-validation folds, initializing
models, generating Gaussian Predictive Process (GPP) knots, and creating
commands for HPC execution. It supports parallel processing, options to
include/not include phylogenetic tree data. The models will be fitted using
Gaussian Predictive Process (GPP; see Tikhonov et al. for more details) via the
Hmsc-HPC extension."><meta property="og:description" content="This function prepares initial models in R use with Hmsc-HPC. It includes
data preparation, define spatial block cross-validation folds, initializing
models, generating Gaussian Predictive Process (GPP) knots, and creating
commands for HPC execution. It supports parallel processing, options to
include/not include phylogenetic tree data. The models will be fitted using
Gaussian Predictive Process (GPP; see Tikhonov et al. for more details) via the
Hmsc-HPC extension."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">IASDT.R</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.02</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html" aria-label="Home"><span class="fa fa-home fa-lg"></span></a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/BioDT/IASDT.R/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Prepare initial models in R for model fitting with Hmsc-HPC</h1>
      <small class="dont-index">Source: <a href="https://github.com/BioDT/IASDT.R/blob/main/R/Mod_Prep4HPC.R" class="external-link"><code>R/Mod_Prep4HPC.R</code></a></small>
      <div class="d-none name"><code>Mod_Prep4HPC.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function prepares initial models in R use with Hmsc-HPC. It includes
data preparation, define spatial block cross-validation folds, initializing
models, generating Gaussian Predictive Process (GPP) knots, and creating
commands for HPC execution. It supports parallel processing, options to
include/not include phylogenetic tree data. The models will be fitted using
Gaussian Predictive Process (GPP; see <a href="https://doi.org/10.1002/ecy.2929" class="external-link">Tikhonov et al.</a> for more details) via the
<a href="https://doi.org/10.1371/journal.pcbi.1011914" class="external-link">Hmsc-HPC</a> extension.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">Mod_Prep4HPC</span><span class="op">(</span></span>
<span>  Hab_Abb <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  Path_Model <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  MinEffortsSp <span class="op">=</span> <span class="fl">100L</span>,</span>
<span>  PresPerSpecies <span class="op">=</span> <span class="fl">80L</span>,</span>
<span>  EnvFile <span class="op">=</span> <span class="st">".env"</span>,</span>
<span>  GPP <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  GPP_Dists <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  GPP_Save <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  GPP_Plot <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  MinLF <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  MaxLF <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  Alphapw <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Prior <span class="op">=</span> <span class="cn">NULL</span>, Min <span class="op">=</span> <span class="fl">20</span>, Max <span class="op">=</span> <span class="fl">1200</span>, Samples <span class="op">=</span> <span class="fl">200</span><span class="op">)</span>,</span>
<span>  BioVars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bio3"</span>, <span class="st">"bio4"</span>, <span class="st">"bio11"</span>, <span class="st">"bio18"</span>, <span class="st">"bio19"</span>, <span class="st">"npp"</span><span class="op">)</span>,</span>
<span>  QuadraticVars <span class="op">=</span> <span class="va">BioVars</span>,</span>
<span>  EffortsAsPredictor <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  RoadRailAsPredictor <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  HabAsPredictor <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  RiversAsPredictor <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  NspPerGrid <span class="op">=</span> <span class="fl">0L</span>,</span>
<span>  ExcludeCult <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  ExcludeZeroHabitat <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  CV_NFolds <span class="op">=</span> <span class="fl">4L</span>,</span>
<span>  CV_NGrids <span class="op">=</span> <span class="fl">20L</span>,</span>
<span>  CV_NR <span class="op">=</span> <span class="fl">2L</span>,</span>
<span>  CV_NC <span class="op">=</span> <span class="fl">2L</span>,</span>
<span>  CV_Plot <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  CV_SAC <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  PhyloTree <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  NoPhyloTree <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  OverwriteRDS <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  NCores <span class="op">=</span> <span class="fl">8L</span>,</span>
<span>  NChains <span class="op">=</span> <span class="fl">4L</span>,</span>
<span>  thin <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  samples <span class="op">=</span> <span class="fl">1000L</span>,</span>
<span>  transientFactor <span class="op">=</span> <span class="fl">500L</span>,</span>
<span>  verbose <span class="op">=</span> <span class="fl">200L</span>,</span>
<span>  SkipFitted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  NumArrayJobs <span class="op">=</span> <span class="fl">210L</span>,</span>
<span>  ModelCountry <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  VerboseProgress <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  FromHPC <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  PrepSLURM <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  MemPerCpu <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  Time <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  JobName <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  Path_Hmsc <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  CheckPython <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  ToJSON <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  Precision <span class="op">=</span> <span class="fl">64L</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-hab-abb">Hab_Abb<a class="anchor" aria-label="anchor" href="#arg-hab-abb"></a></dt>
<dd><p>Character. Abbreviation for the habitat type (based on
<a href="https://www.preslia.cz/article/pdf?id=11548" class="external-link">SynHab</a>) for which to prepare
data. Valid values are <code>0</code>, <code>1</code>, <code>2</code>, <code>3</code>, <code>4a</code>, <code>4b</code>, <code>10</code>, <code>12a</code>, <code>12b</code>.
If <code>Hab_Abb</code> = <code>0</code>, data is prepared irrespective of the habitat type. For
more details, see <a href="https://doi.org/10.23855/preslia.2022.447" class="external-link">Pysek et al.</a>.</p></dd>


<dt id="arg-path-model">Path_Model<a class="anchor" aria-label="anchor" href="#arg-path-model"></a></dt>
<dd><p>String (without trailing slash) specifying the path where
all output, including models to be fitted, will be saved.</p></dd>


<dt id="arg-mineffortssp">MinEffortsSp<a class="anchor" aria-label="anchor" href="#arg-mineffortssp"></a></dt>
<dd><p>Integer specifying the minimum number of vascular plant
species per grid cell (from GBIF data) required for inclusion in the
models. This is to exclude grid cells with very little sampling efforts.
Defaults to <code>100</code>.</p></dd>


<dt id="arg-presperspecies">PresPerSpecies<a class="anchor" aria-label="anchor" href="#arg-presperspecies"></a></dt>
<dd><p>Integer. The minimum number of presence grid cells for
a species to be included in the analysis. The number of presence grid cells
per species is calculated after discarding grid cells with low sampling
efforts (<code>MinEffortsSp</code>) and zero percentage habitat coverage
<code>ExcludeZeroHabitat</code>. Defaults to <code>80</code>.</p></dd>


<dt id="arg-envfile">EnvFile<a class="anchor" aria-label="anchor" href="#arg-envfile"></a></dt>
<dd><p>Character. Path to the environment file containing paths to
data sources. Defaults to <code>.env</code>.</p></dd>


<dt id="arg-gpp">GPP<a class="anchor" aria-label="anchor" href="#arg-gpp"></a></dt>
<dd><p>Logical indicating whether to fit spatial random effect using
Gaussian Predictive Process. Defaults to <code>TRUE</code>. If <code>FALSE</code>, non-spatial
models will be fitted.</p></dd>


<dt id="arg-gpp-dists">GPP_Dists<a class="anchor" aria-label="anchor" href="#arg-gpp-dists"></a></dt>
<dd><p>Integer specifying the distance in <em>kilometers</em> used both
for the spacing between knots and the minimum allowable distance between a
knot and the nearest sampling point. The GPP knots are prepared by the
<a href="PrepKnots.html">PrepKnots</a> function. The same value will be used for the
<code>knotDist</code> and <code>minKnotDist</code>    arguments of the <a href="https://rdrr.io/pkg/Hmsc/man/constructKnots.html" class="external-link">Hmsc::constructKnots</a>
function.</p></dd>


<dt id="arg-gpp-save">GPP_Save<a class="anchor" aria-label="anchor" href="#arg-gpp-save"></a></dt>
<dd><p>Logical indicating whether to save the resulted knots as
<code>RData</code> file. Default: <code>TRUE</code>.</p></dd>


<dt id="arg-gpp-plot">GPP_Plot<a class="anchor" aria-label="anchor" href="#arg-gpp-plot"></a></dt>
<dd><p>Logical indicating whether to plot the coordinates of the
sampling units and the knots in a pdf file. Default: <code>TRUE</code>.</p></dd>


<dt id="arg-minlf-maxlf">MinLF, MaxLF<a class="anchor" aria-label="anchor" href="#arg-minlf-maxlf"></a></dt>
<dd><p>integer. Minimum and maximum number of latent factors to
be used. Both default to <code>NULL</code> which means that the number of latent
factors will be estimated from the data. If either is provided, the
respective values will be used as arguments to <a href="https://rdrr.io/pkg/Hmsc/man/setPriors.html" class="external-link">Hmsc::setPriors</a>.</p></dd>


<dt id="arg-alphapw">Alphapw<a class="anchor" aria-label="anchor" href="#arg-alphapw"></a></dt>
<dd><p>Prior for the alpha parameter. Defaults to a list with <code>Prior = NULL</code>, <code>Min = 20</code>, <code>Max = 1200</code>, and <code>Samples = 200</code>. If <code>Alphapw</code> is
NULL or a list with all NULL list items, the default prior will be used. If
<code>Prior</code> is a matrix, it will be used as the prior. If <code>Prior</code> is <code>NULL</code>,
the prior will be generated using <code>Min</code>, <code>Max</code>, and <code>Samples</code>. <code>Min</code> and
<code>Max</code> are the minimum and maximum values of the alpha parameter (in
kilometer). <code>Samples</code> is the number of samples to be used in the prior.</p></dd>


<dt id="arg-biovars">BioVars<a class="anchor" aria-label="anchor" href="#arg-biovars"></a></dt>
<dd><p>Character vector. Specifies variables from CHELSA to be used
in the model. This can include bioclimatic variables (bio1-19) as well as
other predictors such as npp (Net Primary Productivity). Defaults to 6
ecologically meaningful and less correlated variables: <code>c("bio3", "bio4", "bio11", "bio18", "bio19", "npp")</code>.</p></dd>


<dt id="arg-quadraticvars">QuadraticVars<a class="anchor" aria-label="anchor" href="#arg-quadraticvars"></a></dt>
<dd><p>Character vector for variables for which quadratic terms
are used. Defaults to all variables of the <code>BioVars</code>. If <code>QuadraticVars</code> is
<code>NULL</code>, no quadratic terms will be used.</p></dd>


<dt id="arg-effortsaspredictor">EffortsAsPredictor<a class="anchor" aria-label="anchor" href="#arg-effortsaspredictor"></a></dt>
<dd><p>Logical indicating whether to include the
(log<sub>10</sub>) sampling efforts as predictor to the model. Default:
<code>TRUE</code>.</p></dd>


<dt id="arg-roadrailaspredictor">RoadRailAsPredictor<a class="anchor" aria-label="anchor" href="#arg-roadrailaspredictor"></a></dt>
<dd><p>Logical indicating whether to include the
(log<sub>10</sub>) sum of road and railway intensity as predictor to the
model. Default: <code>TRUE</code>.</p></dd>


<dt id="arg-habaspredictor">HabAsPredictor<a class="anchor" aria-label="anchor" href="#arg-habaspredictor"></a></dt>
<dd><p>Logical indicating whether to include the
(log<sub>10</sub>) percentage coverage of respective habitat type per grid
cell as predictor to the model. Default: <code>TRUE</code>. Only valid if <code>Hab_Abb</code>
not equals to <code>0</code>.</p></dd>


<dt id="arg-riversaspredictor">RiversAsPredictor<a class="anchor" aria-label="anchor" href="#arg-riversaspredictor"></a></dt>
<dd><p>Logical indicating whether to include the total
length of rivers per grid cell as predictor to the model. Default: <code>TRUE</code>.
See <a href="River_Length.html">River_Length</a> for more details.</p></dd>


<dt id="arg-nsppergrid">NspPerGrid<a class="anchor" aria-label="anchor" href="#arg-nsppergrid"></a></dt>
<dd><p>Integer. Indicating the minimum number of species per grid
cell for a grid cell to be include in the analysis. This is calculated
after filtering grid cells by sampling efforts (<code>MinEffortsSp</code>) and
filtering species by the number of presence grid cells (<code>PresPerSpecies</code>).
If <code>NspPerGrid</code> = <code>0</code> (default), all grid cells will be used in the models.
If <code>NspPerGrid</code> &gt; 0, only grid cells with &gt;= <code>NspPerGrid</code> species presence
will be considered in the models.</p></dd>


<dt id="arg-excludecult">ExcludeCult<a class="anchor" aria-label="anchor" href="#arg-excludecult"></a></dt>
<dd><p>Logical. Indicates whether to exclude countries with
cultivated or casual observations per species. Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg-excludezerohabitat">ExcludeZeroHabitat<a class="anchor" aria-label="anchor" href="#arg-excludezerohabitat"></a></dt>
<dd><p>Logical. Indicates whether to exclude grid cells
with zero percentage habitat coverage. Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg-cv-nfolds">CV_NFolds<a class="anchor" aria-label="anchor" href="#arg-cv-nfolds"></a></dt>
<dd><p>Number of cross-validation folds. Default: 4.</p></dd>


<dt id="arg-cv-ngrids">CV_NGrids<a class="anchor" aria-label="anchor" href="#arg-cv-ngrids"></a></dt>
<dd><p>For <code>CV_Dist</code> cross-validation strategy (see below), this
argument determines the size of the blocks (how many grid cells in both
directions).</p></dd>


<dt id="arg-cv-nr-cv-nc">CV_NR, CV_NC<a class="anchor" aria-label="anchor" href="#arg-cv-nr-cv-nc"></a></dt>
<dd><p>Integer, the number of rows and columns used in the
<code>CV_Large</code> cross-validation strategy (see below), in which the study area
is divided into large blocks given the provided <code>CV_NR</code> and <code>CV_NC</code> values.
Both default to 2 which means to split the study area into four large
blocks at the median latitude and longitude.</p></dd>


<dt id="arg-cv-plot">CV_Plot<a class="anchor" aria-label="anchor" href="#arg-cv-plot"></a></dt>
<dd><p>Logical. Indicating whether to plot the block cross-validation
folds.</p></dd>


<dt id="arg-cv-sac">CV_SAC<a class="anchor" aria-label="anchor" href="#arg-cv-sac"></a></dt>
<dd><p>Logical. Indicating whether to use the spatial autocorrelation
to determine the block size. Defaults to <code>FALSE</code>,</p></dd>


<dt id="arg-phylotree-nophylotree">PhyloTree, NoPhyloTree<a class="anchor" aria-label="anchor" href="#arg-phylotree-nophylotree"></a></dt>
<dd><p>Logical parameters indicating whether to fit
models with (PhyloTree) or without (NoPhyloTree) phylogenetic trees.
Defaults are <code>PhyloTree = TRUE</code> and <code>NoPhyloTree = FALSE</code>, meaning only
models with phylogenetic trees are fitted by default. At least one of
<code>PhyloTree</code> and <code>NoPhyloTree</code> should be <code>TRUE</code>.</p></dd>


<dt id="arg-overwriterds">OverwriteRDS<a class="anchor" aria-label="anchor" href="#arg-overwriterds"></a></dt>
<dd><p>Logical. Indicating whether to overwrite previously
exported RDS files for initial models. Default: <code>TRUE</code>.</p></dd>


<dt id="arg-ncores">NCores<a class="anchor" aria-label="anchor" href="#arg-ncores"></a></dt>
<dd><p>Integer specifying the number of parallel cores for
parallelization. Default: 8 cores.</p></dd>


<dt id="arg-nchains">NChains<a class="anchor" aria-label="anchor" href="#arg-nchains"></a></dt>
<dd><p>Integer specifying the number of model chains. Default: 4.</p></dd>


<dt id="arg-thin">thin<a class="anchor" aria-label="anchor" href="#arg-thin"></a></dt>
<dd><p>Integer specifying the value(s) for thinning in MCMC sampling. If
more than one value is provided, a separate model will be fitted at each
value of thinning.</p></dd>


<dt id="arg-samples">samples<a class="anchor" aria-label="anchor" href="#arg-samples"></a></dt>
<dd><p>Integer specifying the value(s) for the number of MCMC
samples. If more than one value is provided, a separate model will be
fitted at each value of number of samples. Defaults to 1000.</p></dd>


<dt id="arg-transientfactor">transientFactor<a class="anchor" aria-label="anchor" href="#arg-transientfactor"></a></dt>
<dd><p>Integer specifying the transient multiplication
factor. The value of <code>transient</code> will equal  the multiplication of
<code>transientFactor</code> and <code>thin</code>. Default: 500.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Integer indicating the interval at which MCMC sampling
progress is reported. Default: <code>200</code>.</p></dd>


<dt id="arg-skipfitted">SkipFitted<a class="anchor" aria-label="anchor" href="#arg-skipfitted"></a></dt>
<dd><p>Logical indicating whether to skip already fitted models.
Default: <code>TRUE</code>.</p></dd>


<dt id="arg-numarrayjobs">NumArrayJobs<a class="anchor" aria-label="anchor" href="#arg-numarrayjobs"></a></dt>
<dd><p>Integer specifying the maximum number of array jobs per
SLURM script. Default: 210. See <a href="https://docs.lumi-supercomputer.eu/runjobs/scheduled-jobs/partitions" class="external-link">LUMI documentation</a>
for more details.</p></dd>


<dt id="arg-modelcountry">ModelCountry<a class="anchor" aria-label="anchor" href="#arg-modelcountry"></a></dt>
<dd><p>String or vector of strings specifying the country or
countries to filter observations by. Default: <code>NULL</code>, which means prepare
data for the whole Europe.</p></dd>


<dt id="arg-verboseprogress">VerboseProgress<a class="anchor" aria-label="anchor" href="#arg-verboseprogress"></a></dt>
<dd><p>Logical. Indicates whether progress messages should be
displayed. Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg-fromhpc">FromHPC<a class="anchor" aria-label="anchor" href="#arg-fromhpc"></a></dt>
<dd><p>Logical indicating whether the work is being done from HPC, to
adjust file paths accordingly. Default: <code>TRUE</code>.</p></dd>


<dt id="arg-prepslurm">PrepSLURM<a class="anchor" aria-label="anchor" href="#arg-prepslurm"></a></dt>
<dd><p>Logical indicating whether to prepare SLURM command files.
If <code>TRUE</code> (default), the SLURM commands will be saved to disk using the
<a href="Mod_SLURM.html">Mod_SLURM</a> function.</p></dd>


<dt id="arg-mempercpu">MemPerCpu<a class="anchor" aria-label="anchor" href="#arg-mempercpu"></a></dt>
<dd><p>String specifying the memory per CPU for the SLURM job. This
value will be assigned to the <code>#SBATCH --mem-per-cpu=</code> SLURM argument.
Example: "32G" to request 32 gigabyte. Only effective if <code>PrepSLURM = TRUE</code>.</p></dd>


<dt id="arg-time">Time<a class="anchor" aria-label="anchor" href="#arg-time"></a></dt>
<dd><p>String specifying the requested time for each job in the SLURM
bash arrays. Example: "01:00:00" to request an hour. Only effective if
<code>PrepSLURM = TRUE</code>.</p></dd>


<dt id="arg-jobname">JobName<a class="anchor" aria-label="anchor" href="#arg-jobname"></a></dt>
<dd><p>String specifying the name of the submitted job(s) for SLURM.
If <code>NULL</code> (Default), the job name will be prepared based on the folder path
and the <code>Hab_Abb</code> value. Only effective if <code>PrepSLURM = TRUE</code>.</p></dd>


<dt id="arg-path-hmsc">Path_Hmsc<a class="anchor" aria-label="anchor" href="#arg-path-hmsc"></a></dt>
<dd><p>String specifying the path for the Hmsc-HPC. This will be
provided as the <code>Path_Hmsc</code> argument of the <a href="Mod_SLURM.html">Mod_SLURM</a> function.</p></dd>


<dt id="arg-checkpython">CheckPython<a class="anchor" aria-label="anchor" href="#arg-checkpython"></a></dt>
<dd><p>Logical indicating whether to check if the Python
executable exists. Only valid if FromHPC = <code>FALSE</code>.</p></dd>


<dt id="arg-tojson">ToJSON<a class="anchor" aria-label="anchor" href="#arg-tojson"></a></dt>
<dd><p>Logical indicating whether to convert unfitted models to JSON
before saving to RDS file. Default: <code>FALSE</code>.</p></dd>


<dt id="arg-precision">Precision<a class="anchor" aria-label="anchor" href="#arg-precision"></a></dt>
<dd><p>Integer, either of 32 or 64 (default) for the
precision mode used in <code>Hmsc-HPC</code> sampling (<code>--fp 32</code> or <code>--fp 64</code>
argument). In <code>Hmsc-HPC</code>, the default value is 64. This is still under
testing.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional parameters provided to the <a href="Mod_SLURM.html">Mod_SLURM</a>
function.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The function is used for its side effects of preparing data and
models for HPC and does not return any value.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function provides options for:</p><ul><li><p>for which habitat types the models will be fitted</p></li>
<li><p>excluding grid cells with very low sampling efforts (<code>MinEffortsSp</code>)</p></li>
<li><p>selection of species based on minimum number of presence-grid
cells: <code>PresPerSpecies</code>.</p></li>
<li><p>optionally model fitting on specified list of countries: (<code>ModelCountry</code>)</p></li>
<li><p>whether to exclude grid cells with few species (<code>NspPerGrid</code>)</p></li>
<li><p>number of cross-validation folds</p></li>
<li><p>options for whether or not to include phylogenetic information to the model</p></li>
<li><p>different values for knot distance for GPP (<code>GPP_Dists</code>)</p></li>
<li><p>which Bioclimatic variables to be uses in the models (<code>BioVars</code>)</p></li>
<li><p>whether to include sampling efforts <code>EffortsAsPredictor</code>, percentage of
respective habitat type per grid cell <code>HabAsPredictor</code>, and railway and
road intensity per grid cell <code>RoadRailAsPredictor</code></p></li>
<li><p>Hmsc options (<code>NChains</code>, <code>thin</code>, <code>samples</code>, <code>transientFactor</code>,
and <code>verbose</code>)</p></li>
<li><p>prepare SLURM commands (<code>PrepSLURM</code>) and some specifications (e.g.
<code>NumArrayJobs</code>, <code>MemPerCpu</code>, <code>Time</code>, <code>JobName</code>)</p>
<p>The function reads the following environment variables:</p><ul><li><p><strong><code>DP_R_Grid</code></strong> (if <code>FromHPC = TRUE</code>) or
<strong><code>DP_R_Grid_Local</code></strong> (if <code>FromHPC = FALSE</code>). The function reads
the content of the <code>Grid_10_Land_Crop.RData</code> file from this path.</p></li>
<li><p><strong><code>DP_R_TaxaInfo</code></strong> or <strong><code>DP_R_TaxaInfo_Local</code></strong> for the location of the
<code>Species_List_ID.txt</code> file representing species information.</p></li>
<li><p><strong><code>DP_R_EUBound_sf</code></strong> or <strong><code>DP_R_EUBound_sf_Local</code></strong> for the path of the
<code>RData</code> file containing the country boundaries (<code>sf</code> object)</p></li>
<li><p><strong><code>DP_R_PA</code></strong> or <strong><code>DP_R_PA_Local</code></strong>: The function reads the contents of
the <code>Sp_PA_Summary_DF.RData</code> file from this path</p></li>
</ul></li>
</ul></div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Ahmed El-Gabbas</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://elgabbas.netlify.app/" class="external-link">Ahmed El-Gabbas</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

