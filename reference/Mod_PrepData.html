<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Prepare habitat-specific data for Hmsc models — Mod_PrepData • IASDT.R</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Prepare habitat-specific data for Hmsc models — Mod_PrepData"><meta name="description" content="This function processes environmental and species presence data to prepare
habitat-specific datasets for use in Hmsc models. It checks input arguments,
reads environment variables from a file, verifies paths, loads and filters
species data based on habitat type and minimum presence grid cells per
species, and merges various environmental layers (e.g., CHELSA Bioclimatic
variables, habitat coverage, road and railway intensity, sampling efforts)
into a single dataset. Processed data is saved to disk as an *.RData
file."><meta property="og:description" content="This function processes environmental and species presence data to prepare
habitat-specific datasets for use in Hmsc models. It checks input arguments,
reads environment variables from a file, verifies paths, loads and filters
species data based on habitat type and minimum presence grid cells per
species, and merges various environmental layers (e.g., CHELSA Bioclimatic
variables, habitat coverage, road and railway intensity, sampling efforts)
into a single dataset. Processed data is saved to disk as an *.RData
file."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">IASDT.R</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.02</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/BioDT/IASDT.R/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Prepare habitat-specific data for Hmsc models</h1>
      <small class="dont-index">Source: <a href="https://github.com/BioDT/IASDT.R/blob/main/R/Mod_PrepData.R" class="external-link"><code>R/Mod_PrepData.R</code></a></small>
      <div class="d-none name"><code>Mod_PrepData.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function processes environmental and species presence data to prepare
habitat-specific datasets for use in Hmsc models. It checks input arguments,
reads environment variables from a file, verifies paths, loads and filters
species data based on habitat type and minimum presence grid cells per
species, and merges various environmental layers (e.g., CHELSA Bioclimatic
variables, habitat coverage, road and railway intensity, sampling efforts)
into a single dataset. Processed data is saved to disk as an <code>*.RData</code>
file.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">Mod_PrepData</span><span class="op">(</span></span>
<span>  Hab_Abb <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  MinEffortsSp <span class="op">=</span> <span class="fl">100L</span>,</span>
<span>  ExcludeCult <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  ExcludeZeroHabitat <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  PresPerSpecies <span class="op">=</span> <span class="fl">80L</span>,</span>
<span>  EnvFile <span class="op">=</span> <span class="st">".env"</span>,</span>
<span>  Path_Model <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  VerboseProgress <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  FromHPC <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-hab-abb">Hab_Abb<a class="anchor" aria-label="anchor" href="#arg-hab-abb"></a></dt>
<dd><p>Character. Abbreviation for the habitat type (based on
<a href="https://www.preslia.cz/article/pdf?id=11548" class="external-link">SynHab</a>) for which to prepare
data. Valid values are <code>0</code>, <code>1</code>, <code>2</code>, <code>3</code>, <code>4a</code>, <code>4b</code>, <code>10</code>, <code>12a</code>, <code>12b</code>.
If <code>Hab_Abb</code> = <code>0</code>, data is prepared irrespective of the habitat type. For
more details, see <a href="https://doi.org/10.23855/preslia.2022.447" class="external-link">Pysek et al.</a>.</p></dd>


<dt id="arg-mineffortssp">MinEffortsSp<a class="anchor" aria-label="anchor" href="#arg-mineffortssp"></a></dt>
<dd><p>Integer specifying the minimum number of vascular plant
species per grid cell (from GBIF data) required for inclusion in the
models. This is to exclude grid cells with very little sampling efforts.
Defaults to <code>100</code>.</p></dd>


<dt id="arg-excludecult">ExcludeCult<a class="anchor" aria-label="anchor" href="#arg-excludecult"></a></dt>
<dd><p>Logical. Indicates whether to exclude countries with
cultivated or casual observations per species. Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg-excludezerohabitat">ExcludeZeroHabitat<a class="anchor" aria-label="anchor" href="#arg-excludezerohabitat"></a></dt>
<dd><p>Logical. Indicates whether to exclude grid cells
with zero percentage habitat coverage. Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg-presperspecies">PresPerSpecies<a class="anchor" aria-label="anchor" href="#arg-presperspecies"></a></dt>
<dd><p>Integer. The minimum number of presence grid cells for
a species to be included in the analysis. The number of presence grid cells
per species is calculated after discarding grid cells with low sampling
efforts (<code>MinEffortsSp</code>) and zero percentage habitat coverage
<code>ExcludeZeroHabitat</code>. Defaults to <code>80</code>.</p></dd>


<dt id="arg-envfile">EnvFile<a class="anchor" aria-label="anchor" href="#arg-envfile"></a></dt>
<dd><p>Character. Path to the environment file containing paths to
data sources. Defaults to <code>.env</code>.</p></dd>


<dt id="arg-path-model">Path_Model<a class="anchor" aria-label="anchor" href="#arg-path-model"></a></dt>
<dd><p>Character. Path where the output file should be saved.</p></dd>


<dt id="arg-verboseprogress">VerboseProgress<a class="anchor" aria-label="anchor" href="#arg-verboseprogress"></a></dt>
<dd><p>Logical. Indicates whether progress messages should be
displayed. Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg-fromhpc">FromHPC<a class="anchor" aria-label="anchor" href="#arg-fromhpc"></a></dt>
<dd><p>Logical indicating whether the work is being done from HPC, to
adjust file paths accordingly. Default: <code>TRUE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a tibble containing modelling data.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function reads the following environment variables:</p><ul><li><p><strong><code>DP_R_Grid</code></strong> (if <code>FromHPC</code> = <code>TRUE</code>) or <strong><code>DP_R_Grid_Local</code></strong> (if
<code>FromHPC</code> = <code>FALSE</code>). The function reads the content of the
<code>Grid_10_Land_Crop.RData</code> and <code>Grid_10_Land_Crop_sf_Country.RData</code> files</p></li>
<li><p><strong><code>DP_R_Grid_Ref</code></strong> or <strong><code>DP_R_Grid_Ref_Local</code></strong>: The function reads the
content of <code>Grid_10_sf.RData</code> file from this path.</p></li>
<li><p><strong><code>DP_R_PA</code></strong> or <strong><code>DP_R_PA_Local</code></strong>: The function reads the contents
of the <code>Sp_PA_Summary_DF.RData</code> file from this path.</p></li>
<li><p><strong><code>DP_R_CLC_Summary</code></strong> / <strong><code>DP_R_CLC_Summary_Local</code></strong>: Path containing
the <code>PercCov_SynHab_Crop.RData</code> file. This file contains maps for the
percentage coverage of each SynHab habitat type per grid cell.</p></li>
<li><p><strong><code>DP_R_CHELSA_Output</code></strong> / <strong><code>DP_R_CHELSA_Output_Local</code></strong>: Path
for processed CHELSA data.</p></li>
<li><p><strong><code>DP_R_Roads</code></strong> / <strong><code>DP_R_Roads_Local</code></strong>: Path for processed road data.
The function reads the contents of: <code>Road_Length.RData</code> for the total length
of any road type per grid cell.</p></li>
<li><p><strong><code>DP_R_Railway</code></strong> / <strong><code>DP_R_Railway_Local</code></strong>: Path for processed
railway data. The function reads the contents of: <code>Railway_Length.RData</code> for
the total length of any railway type per grid cell.</p></li>
<li><p><strong><code>DP_R_Efforts</code></strong> / <strong><code>DP_R_Efforts_Local</code></strong>: Path for processed
sampling efforts analysis. The function reads the content of
<code>Bias_GBIF_SummaryR.RData</code> file containing the total number of GBIF vascular
plant observations per grid cell.</p></li>
</ul><p>The current models are fitted for 8 habitat types see <a href="https://doi.org/10.23855/preslia.2022.447" class="external-link">Pysek et al.</a>:</p><ul><li><p><strong>1. Forests</strong> – closed vegetation dominated by deciduous or evergreen
trees</p></li>
<li><p><strong>2. Open forests</strong> – woodlands with canopy openings created by
environmental stress or disturbance, including forest edges</p></li>
<li><p><strong>3. Scrub</strong> – shrublands maintained by environmental stress (aridity) or
disturbance</p></li>
<li><p><strong>4a. Natural grasslands</strong> – grasslands maintained by climate (aridity,
unevenly distributed precipitation), herbivores or environmental stress
(aridity, instability or toxicity of substrate)</p></li>
<li><p><strong>4b. Human-maintained grasslands</strong> – grasslands dependent on regular
human-induced management (mowing, grazing by livestock, artificial burning)</p></li>
<li><p><strong>10. Wetland</strong> – sites with the permanent or seasonal influence of
moisture, ranging from oligotrophic to eutrophic</p></li>
<li><p><strong>12a. Ruderal habitats</strong> – anthropogenically disturbed or eutrophicated
sites, where the anthropogenic disturbance or fertilization is typically a
side-product and not the aim of the management</p></li>
<li><p><strong>12b. Agricultural habitats</strong> – synanthropic habitats directly
associated with growing of agricultural products, thus dependent on specific
type of management (ploughing, fertilization)</p></li>
</ul><p>The following habitat types are excluded from the analysis:</p><ul><li><p><strong>5. Sandy</strong> – dunes and other habitats on unstable sandy substrate,
stressed by low nutrients, drought and disturbed by sand movement</p></li>
<li><p><strong>6. Rocky</strong> – cliffs and rock outcrops with very shallow or no soil</p></li>
<li><p><strong>7. Dryland</strong> – habitats in which drought stress limits vegetation
development</p></li>
<li><p><strong>8. Saline</strong> – habitats stressed by high soil salinity</p></li>
<li><p><strong>9. Riparian</strong> – a mosaic of wetlands, grasslands, tall-forb stands,
scrub and open forests in stream corridors</p></li>
<li><p><strong>11. Aquatic</strong> – water bodies and streams with submerged and floating
plant species</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Ahmed El-Gabbas</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://elgabbas.netlify.app/" class="external-link">Ahmed El-Gabbas</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

