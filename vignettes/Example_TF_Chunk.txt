#!/bin/bash

# Load TensorFlow module and configure environment
ml use /appl/local/csc/modulefiles
ml tensorflow
export TF_CPP_MIN_LOG_LEVEL=3
export TF_ENABLE_ONEDNN_OPTS=0

# Verify GPU availability
python3 -c "import tensorflow as tf; print(\"Num GPUs Available:\", len(tf.config.list_physical_devices(\"GPU\")))"

# 20 commands to be executed:
python3 crossprod_solve.py --s1 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s1.feather' --s2 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s2.feather' --post_eta 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_postEta_ch001.feather' --path_out 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch001.feather' --denom 50000 --chunk_size 1000 --threshold_mb 2000 --solve_chunk_size 50 --verbose  >> datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch001.log 2>&1
python3 crossprod_solve.py --s1 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s1.feather' --s2 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s2.feather' --post_eta 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_postEta_ch002.feather' --path_out 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch002.feather' --denom 1470707 --chunk_size 1000 --threshold_mb 2000 --solve_chunk_size 50 --verbose  >> datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch002.log 2>&1
python3 crossprod_solve.py --s1 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s1.feather' --s2 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s2.feather' --post_eta 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_postEta_ch003.feather' --path_out 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch003.feather' --denom 1485354 --chunk_size 1000 --threshold_mb 2000 --solve_chunk_size 50 --verbose  >> datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch003.log 2>&1
python3 crossprod_solve.py --s1 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s1.feather' --s2 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s2.feather' --post_eta 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_postEta_ch004.feather' --path_out 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch004.feather' --denom 1456061 --chunk_size 1000 --threshold_mb 2000 --solve_chunk_size 50 --verbose  >> datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch004.log 2>&1
python3 crossprod_solve.py --s1 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s1.feather' --s2 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s2.feather' --post_eta 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_postEta_ch005.feather' --path_out 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch005.feather' --denom 1500000 --chunk_size 1000 --threshold_mb 2000 --solve_chunk_size 50 --verbose  >> datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch005.log 2>&1
python3 crossprod_solve.py --s1 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s1.feather' --s2 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s2.feather' --post_eta 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_postEta_ch006.feather' --path_out 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch006.feather' --denom 1500000 --chunk_size 1000 --threshold_mb 2000 --solve_chunk_size 50 --verbose  >> datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch006.log 2>&1
python3 crossprod_solve.py --s1 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s1.feather' --s2 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s2.feather' --post_eta 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_postEta_ch007.feather' --path_out 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch007.feather' --denom 1426768 --chunk_size 1000 --threshold_mb 2000 --solve_chunk_size 50 --verbose  >> datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch007.log 2>&1
python3 crossprod_solve.py --s1 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s1.feather' --s2 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s2.feather' --post_eta 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_postEta_ch008.feather' --path_out 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch008.feather' --denom 1470707 --chunk_size 1000 --threshold_mb 2000 --solve_chunk_size 50 --verbose  >> datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch008.log 2>&1
python3 crossprod_solve.py --s1 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s1.feather' --s2 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s2.feather' --post_eta 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_postEta_ch009.feather' --path_out 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch009.feather' --denom 1485354 --chunk_size 1000 --threshold_mb 2000 --solve_chunk_size 50 --verbose  >> datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch009.log 2>&1
python3 crossprod_solve.py --s1 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s1.feather' --s2 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s2.feather' --post_eta 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_postEta_ch010.feather' --path_out 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch010.feather' --denom 1456061 --chunk_size 1000 --threshold_mb 2000 --solve_chunk_size 50 --verbose  >> datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch010.log 2>&1
python3 crossprod_solve.py --s1 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s1.feather' --s2 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s2.feather' --post_eta 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_postEta_ch011.feather' --path_out 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch011.feather' --denom 1470707 --chunk_size 1000 --threshold_mb 2000 --solve_chunk_size 50 --verbose  >> datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch011.log 2>&1
python3 crossprod_solve.py --s1 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s1.feather' --s2 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s2.feather' --post_eta 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_postEta_ch012.feather' --path_out 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch012.feather' --denom 1412121 --chunk_size 1000 --threshold_mb 2000 --solve_chunk_size 50 --verbose  >> datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch012.log 2>&1
python3 crossprod_solve.py --s1 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s1.feather' --s2 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s2.feather' --post_eta 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_postEta_ch013.feather' --path_out 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch013.feather' --denom 1426768 --chunk_size 1000 --threshold_mb 2000 --solve_chunk_size 50 --verbose  >> datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch013.log 2>&1
python3 crossprod_solve.py --s1 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s1.feather' --s2 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s2.feather' --post_eta 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_postEta_ch014.feather' --path_out 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch014.feather' --denom 1426768 --chunk_size 1000 --threshold_mb 2000 --solve_chunk_size 50 --verbose  >> datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch014.log 2>&1
python3 crossprod_solve.py --s1 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s1.feather' --s2 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s2.feather' --post_eta 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_postEta_ch015.feather' --path_out 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch015.feather' --denom 1441414 --chunk_size 1000 --threshold_mb 2000 --solve_chunk_size 50 --verbose  >> datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch015.log 2>&1
python3 crossprod_solve.py --s1 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s1.feather' --s2 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s2.feather' --post_eta 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_postEta_ch016.feather' --path_out 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch016.feather' --denom 1456061 --chunk_size 1000 --threshold_mb 2000 --solve_chunk_size 50 --verbose  >> datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch016.log 2>&1
python3 crossprod_solve.py --s1 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s1.feather' --s2 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s2.feather' --post_eta 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_postEta_ch017.feather' --path_out 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch017.feather' --denom 1441414 --chunk_size 1000 --threshold_mb 2000 --solve_chunk_size 50 --verbose  >> datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch017.log 2>&1
python3 crossprod_solve.py --s1 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s1.feather' --s2 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s2.feather' --post_eta 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_postEta_ch018.feather' --path_out 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch018.feather' --denom 1382828 --chunk_size 1000 --threshold_mb 2000 --solve_chunk_size 50 --verbose  >> datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch018.log 2>&1
python3 crossprod_solve.py --s1 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s1.feather' --s2 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s2.feather' --post_eta 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_postEta_ch019.feather' --path_out 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch019.feather' --denom 1485354 --chunk_size 1000 --threshold_mb 2000 --solve_chunk_size 50 --verbose  >> datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch019.log 2>&1
python3 crossprod_solve.py --s1 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s1.feather' --s2 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_s2.feather' --post_eta 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_postEta_ch020.feather' --path_out 'datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch020.feather' --denom 1368182 --chunk_size 1000 --threshold_mb 2000 --solve_chunk_size 50 --verbose  >> datasets/processed/model_fitting/Mod_Riv_Hab1/temp_pred/lf_1_Test_etaPred_ch020.log 2>&1
